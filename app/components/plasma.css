/* ---------- base: keep as-is ---------- */
.plasma-container { isolation: isolate; }
.plasma-container {
  --plasma-opacity: 0.65;
  --plasma-blur: 30px;
  --plasma-speed: 1;
  --plasma-grain-visible: 1;

  /* transform + filter vars */
  --tx: 0%;          /* translateX */
  --ty: 0%;          /* translateY */
  --sat: 120%;       /* saturate() */
  --hue: 0deg;       /* hue-rotate() */
}

/* ---------- main layer: compose via vars ---------- */
.plasma-layer {
  position: absolute;
  inset: -10%;
  opacity: var(--plasma-opacity);
  background-image: var(--plasma-colors-1), var(--plasma-colors-2);
  background-repeat: no-repeat;
  background-size: 120% 120%, 120% 120%;
  mix-blend-mode: screen;
  will-change: transform, filter, opacity;

  /* Compose everything with variables */
  transform: translateX(var(--tx)) translateY(var(--ty));
  filter: blur(var(--plasma-blur)) saturate(var(--sat)) hue-rotate(var(--hue));

  /* Drive the variables with animations */
  animation:
    plasma-float-x-vars calc(18s / var(--plasma-speed)) linear infinite,
    plasma-float-y-vars calc(22s / var(--plasma-speed)) ease-in-out infinite,
    plasma-pulse-vars   calc(12s / var(--plasma-speed)) ease-in-out infinite,
    plasma-hue-vars     calc(30s / var(--plasma-speed)) linear infinite;
  animation-play-state: running, running, running, running;
}

/* ---------- fog and grain: unchanged ---------- */
.plasma-fog { /* ... keep your previous fog styles ... */ }
.plasma-grain { /* ... keep your previous grain styles ... */ }

/* =================== Animations (variable-based) =================== */

/* Move X by updating --tx */
@keyframes plasma-float-x-vars {
  0%   { --tx: -2%; }
  50%  { --tx:  2%; }
  100% { --tx: -2%; }
}

/* Move Y by updating --ty */
@keyframes plasma-float-y-vars {
  0%   { --ty: 0%; }
  50%  { --ty: 3%; }
  100% { --ty: 0%; }
}

/* Pulse by updating --sat (you can also vary blur if you like) */
@keyframes plasma-pulse-vars {
  0%, 100% { --sat: 115%; }
  50%      { --sat: 130%; }
}

/* Hue rotation by updating --hue */
@keyframes plasma-hue-vars {
  0%   { --hue: 0deg; }
  100% { --hue: 360deg; }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  .plasma-layer,
  .plasma-grain { animation: none !important; }
}
